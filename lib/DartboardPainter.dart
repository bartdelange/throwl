import 'dart:developer';

import 'package:svg_path_parser/svg_path_parser.dart';
import 'package:dartapp/DartboardPart.dart';
import 'package:flutter/material.dart';
import 'package:touchable/touchable.dart';

class DartboardPainter extends CustomPainter {
  final BuildContext context;
  final Function(DartboardScoreType type, int score) onClickHandler;
  static const _DESIGN_WIDTH = 6946;
  static const _DESIGN_HEIGHT = 6946;

  DartboardPainter(this.context, this.onClickHandler);
  @override
  void paint(Canvas canvas, Size size) {
    var myCanvas = TouchyCanvas(context, canvas);
    List<DartboardPart> partsList = [
      DartboardPart(DartboardScoreType.single, 20, "M3227.8,1928.96c161.946,-25.641 326.925,-25.641 488.871,0l-162.971,1028.84c-53.975,-8.542 -108.975,-8.542 -162.95,-0l-162.95,-1028.84Zm-190.104,-1200.31c287.9,-45.609 581.179,-45.588 869.079,-0l-135.8,857.379c-197.934,-31.354 -399.563,-31.354 -597.5,-0.017l-135.779,-857.362Z", Color(0xff000000)),
      DartboardPart(DartboardScoreType.single, 1, "M3716.67,1928.96c161.925,25.642 318.821,76.634 464.912,151.059l-472.9,928.125c-48.696,-24.809 -101.004,-41.788 -154.983,-50.346l162.971,-1028.84Zm190.104,-1200.31c287.9,45.591 566.821,136.233 826.546,268.558l-394.1,773.438c-178.559,-90.971 -370.313,-153.28 -568.246,-184.617l135.8,-857.379Z", Color(0xfffde2bc)),
      DartboardPart(DartboardScoreType.single, 18, "M4181.58,2080.02c146.096,74.446 279.55,171.425 395.505,287.346l-736.563,736.562c-38.663,-38.629 -83.158,-70.954 -131.842,-95.783l472.9,-928.125Zm551.738,-1082.81c259.704,132.329 496.979,304.725 703.087,510.834l-613.8,613.82c-141.7,-141.72 -304.825,-260.225 -483.387,-351.216l394.1,-773.438Z", Color(0xff000000)),
      DartboardPart(DartboardScoreType.single, 4, "M4577.08,2367.36c115.938,115.954 212.9,249.425 287.325,395.483l-928.125,472.917c-24.808,-48.68 -57.133,-93.175 -95.762,-131.838l736.562,-736.562Zm859.321,-859.325c206.113,206.112 378.509,443.387 510.833,703.091l-773.454,394.096c-90.971,-178.558 -209.479,-341.683 -351.179,-483.367l613.8,-613.82Z", Color(0xfffde2bc)),
      DartboardPart(DartboardScoreType.single, 13, "M4864.42,2762.85c74.445,146.096 125.433,303.004 151.079,464.95l-1028.84,162.95c-8.558,-53.975 -25.558,-106.284 -50.366,-154.983l928.125,-472.917Zm1082.83,-551.717c132.329,259.721 222.971,538.646 268.558,826.563l-857.358,135.779c-31.354,-197.933 -93.663,-389.688 -184.654,-568.246l773.454,-394.096Z", Color(0xff000000)),
      DartboardPart(DartboardScoreType.single, 6, "M6215.79,3037.69c45.608,287.9 45.591,581.179 -0,869.079l-857.375,-135.8c31.354,-197.933 31.354,-399.563 0.016,-597.5l857.359,-135.779Zm-1200.31,190.104c25.642,161.946 25.642,326.925 0,488.871l-1028.84,-162.971c8.541,-53.975 8.541,-108.975 -0,-162.95l1028.84,-162.95Z", Color(0xfffde2bc)),
      DartboardPart(DartboardScoreType.single, 10, "M6215.79,3906.77c-45.588,287.9 -136.229,566.821 -268.559,826.546l-773.437,-394.1c90.975,-178.559 153.283,-370.313 184.621,-568.246l857.375,135.8Zm-1200.31,-190.104c-25.646,161.925 -76.633,318.821 -151.062,464.912l-928.125,-472.9c24.812,-48.696 41.791,-101.004 50.35,-154.983l1028.84,162.971Z", Color(0xff000000)),
      DartboardPart(DartboardScoreType.single, 15, "M5947.25,4733.33c-132.325,259.704 -304.721,496.98 -510.833,703.088l-613.817,-613.8c141.717,-141.7 260.225,-304.825 351.212,-483.388l773.438,394.1Zm-1082.81,-551.737c-74.441,146.096 -171.42,279.55 -287.341,395.504l-736.563,-736.563c38.63,-38.662 70.955,-83.158 95.78,-131.841l928.125,472.9Z", Color(0xfffde2bc)),
      DartboardPart(DartboardScoreType.single, 2, "M5436.42,5436.42c-206.109,206.112 -443.384,378.508 -703.088,510.833l-394.1,-773.454c178.563,-90.971 341.688,-209.479 483.371,-351.179l613.817,613.8Zm-859.321,-859.321c-115.954,115.937 -249.429,212.9 -395.488,287.325l-472.916,-928.125c48.683,-24.808 93.179,-57.133 131.841,-95.763l736.563,736.563Z", Color(0xff000000)),
      DartboardPart(DartboardScoreType.single, 17, "M4733.33,5947.25c-259.725,132.329 -538.646,222.971 -826.562,268.558l-135.784,-857.358c197.934,-31.354 389.688,-93.663 568.246,-184.654l394.1,773.454Zm-551.721,-1082.83c-146.091,74.446 -303.004,125.433 -464.945,151.079l-162.955,-1028.84c53.98,-8.558 106.288,-25.558 154.984,-50.366l472.916,928.125Z", Color(0xfffde2bc)),
      DartboardPart(DartboardScoreType.single, 3, "M3906.75,6215.79c-287.9,45.608 -581.179,45.591 -869.079,-0l135.796,-857.375c197.937,31.354 399.567,31.354 597.5,0.016l135.783,857.359Zm-190.104,-1200.31c-161.946,25.642 -326.929,25.642 -488.871,0l162.967,-1028.84c53.975,8.541 108.975,8.541 162.95,-0l162.954,1028.84Z", Color(0xff000000)),
      DartboardPart(DartboardScoreType.single, 19, "M3037.68,6215.79c-287.9,-45.588 -566.825,-136.229 -826.546,-268.559l394.096,-773.437c178.558,90.975 370.313,153.283 568.246,184.621l-135.796,857.375Zm190.104,-1200.31c-161.929,-25.646 -318.821,-76.633 -464.912,-151.062l472.896,-928.125c48.7,24.812 101.008,41.791 154.983,50.35l-162.967,1028.84Z", Color(0xfffde2bc)),
      DartboardPart(DartboardScoreType.single, 7, "M2211.13,5947.25c-259.704,-132.325 -496.979,-304.721 -703.091,-510.833l613.804,-613.817c141.7,141.717 304.825,260.225 483.383,351.212l-394.096,773.438Zm551.738,-1082.81c-146.096,-74.441 -279.55,-171.42 -395.505,-287.341l736.563,-736.563c38.662,38.63 83.158,70.955 131.838,95.78l-472.896,928.125Z", Color(0xff000000)),
      DartboardPart(DartboardScoreType.single, 16, "M1508.04,5436.42c-206.108,-206.109 -378.504,-443.384 -510.833,-703.088l773.459,-394.1c90.97,178.563 209.474,341.688 351.179,483.371l-613.805,613.817Zm859.325,-859.321c-115.937,-115.954 -212.9,-249.429 -287.329,-395.488l928.125,-472.916c24.813,48.683 57.138,93.179 95.767,131.841l-736.563,736.563Z", Color(0xfffde2bc)),
      DartboardPart(DartboardScoreType.single, 8, "M997.204,4733.33c-132.325,-259.725 -222.967,-538.646 -268.558,-826.562l857.362,-135.784c31.354,197.934 93.663,389.688 184.655,568.246l-773.459,394.1Zm1082.83,-551.721c-74.441,-146.091 -125.433,-303.004 -151.075,-464.945l1028.84,-162.955c8.558,53.98 25.554,106.288 50.362,154.984l-928.125,472.916Z", Color(0xff000000)),
      DartboardPart(DartboardScoreType.single, 11, "M728.646,3906.75c-45.609,-287.9 -45.588,-581.179 -0,-869.079l857.379,135.796c-31.354,197.937 -31.354,399.567 -0.017,597.5l-857.362,135.783Zm1200.31,-190.104c-25.641,-161.946 -25.641,-326.929 0,-488.871l1028.84,162.967c-8.542,53.975 -8.542,108.975 -0,162.95l-1028.84,162.954Z", Color(0xfffde2bc)),
      DartboardPart(DartboardScoreType.single, 14, "M1928.96,3227.78c25.642,-161.929 76.634,-318.821 151.059,-464.912l928.125,472.896c-24.809,48.7 -41.788,101.008 -50.346,154.983l-1028.84,-162.967Zm-1200.31,-190.104c45.591,-287.9 136.233,-566.825 268.558,-826.546l773.438,394.096c-90.971,178.558 -153.28,370.312 -184.617,568.246l-857.379,-135.796Z", Color(0xff000000)),
      DartboardPart(DartboardScoreType.single, 9, "M2080.02,2762.87c74.446,-146.096 171.425,-279.55 287.346,-395.505l736.562,736.563c-38.629,38.662 -70.954,83.158 -95.783,131.837l-928.125,-472.895Zm-1082.81,-551.738c132.329,-259.704 304.725,-496.979 510.834,-703.092l613.82,613.805c-141.72,141.7 -260.225,304.825 -351.216,483.383l-773.438,-394.096Z", Color(0xfffde2bc)),
      DartboardPart(DartboardScoreType.single, 12, "M2367.36,2367.36c115.954,-115.938 249.425,-212.9 395.483,-287.33l472.917,928.125c-48.68,24.813 -93.175,57.138 -131.838,95.767l-736.562,-736.562Zm-859.325,-859.325c206.112,-206.109 443.387,-378.505 703.091,-510.834l394.096,773.459c-178.558,90.97 -341.683,209.475 -483.367,351.179l-613.82,-613.804Z", Color(0xff000000)),
      DartboardPart(DartboardScoreType.single, 5, "M2762.85,2080.03c146.096,-74.441 303.004,-125.433 464.95,-151.075l162.95,1028.84c-53.975,8.558 -106.284,25.554 -154.983,50.362l-472.917,-928.125Zm-551.717,-1082.83c259.721,-132.325 538.646,-222.966 826.563,-268.558l135.779,857.362c-197.933,31.355 -389.688,93.663 -568.246,184.655l-394.096,-773.459Z", Color(0xfffde2bc)),
      DartboardPart(DartboardScoreType.double, 20, "M2983.37,385.696c323.879,-51.296 653.825,-51.296 977.712,0.004l-54.312,342.946c-287.896,-45.596 -581.179,-45.6 -869.084,-0l-54.316,-342.95Z", Color(0xffff0201)),
      DartboardPart(DartboardScoreType.double, 1, "M3961.08,385.7c323.888,51.3 637.679,153.263 929.859,302.129l-157.625,309.371c-259.713,-132.321 -538.646,-222.962 -826.546,-268.554l54.312,-342.946Z", Color(0xff008000)),
      DartboardPart(DartboardScoreType.double, 18, "M4890.96,687.829c292.179,148.871 559.121,342.817 790.992,574.692l-245.517,245.512c-206.116,-206.112 -443.383,-378.496 -703.1,-510.833l157.625,-309.371Z", Color(0xffff0201)),
      DartboardPart(DartboardScoreType.double, 4, "M5681.92,1262.52c231.871,231.879 425.808,498.8 574.683,790.983l-309.375,157.629c-132.325,-259.716 -304.725,-496.987 -510.825,-703.1l245.517,-245.512Z", Color(0xff008000)),
      DartboardPart(DartboardScoreType.double, 13, "M6256.62,2053.5c148.879,292.184 250.838,605.984 302.133,929.863l-342.945,54.316c-45.601,-287.904 -136.234,-566.829 -268.563,-826.55l309.375,-157.629Z", Color(0xffff0201)),
      DartboardPart(DartboardScoreType.double, 6, "M6558.75,2983.37c51.3,323.879 51.3,653.825 -0.004,977.712l-342.942,-54.312c45.592,-287.896 45.6,-581.179 0,-869.084l342.946,-54.316Z", Color(0xff008000)),
      DartboardPart(DartboardScoreType.double, 10, "M6558.75,3961.08c-51.3,323.888 -153.258,637.679 -302.129,929.859l-309.367,-157.625c132.321,-259.713 222.958,-538.646 268.554,-826.546l342.942,54.312Z", Color(0xffff0201)),
      DartboardPart(DartboardScoreType.double, 15, "M6256.62,4890.96c-148.867,292.179 -342.813,559.121 -574.688,790.992l-245.512,-245.517c206.108,-206.116 378.496,-443.383 510.833,-703.1l309.367,157.625Z", Color(0xff008000)),
      DartboardPart(DartboardScoreType.double, 2, "M5681.92,5681.92c-231.88,231.871 -498.804,425.808 -790.988,574.683l-157.629,-309.375c259.721,-132.325 496.992,-304.725 703.104,-510.825l245.513,245.517Z", Color(0xffff0201)),
      DartboardPart(DartboardScoreType.double, 17, "M4890.96,6256.62c-292.179,148.879 -605.979,250.838 -929.858,302.133l-54.317,-342.945c287.904,-45.601 566.829,-136.234 826.546,-268.563l157.629,309.375Z", Color(0xff008000)),
      DartboardPart(DartboardScoreType.double, 3, "M3961.08,6558.75c-323.879,51.3 -653.829,51.3 -977.716,-0.004l54.312,-342.942c287.9,45.592 581.183,45.6 869.088,0l54.316,342.946Z", Color(0xffff0201)),
      DartboardPart(DartboardScoreType.double, 19, "M2983.36,6558.75c-323.888,-51.3 -637.676,-153.258 -929.855,-302.129l157.625,-309.367c259.713,132.321 538.646,222.958 826.542,268.554l-54.312,342.942Z", Color(0xff008000)),
      DartboardPart(DartboardScoreType.double, 7, "M2053.51,6256.62c-292.183,-148.867 -559.125,-342.813 -790.996,-574.688l245.521,-245.512c206.117,206.108 443.384,378.496 703.1,510.833l-157.625,309.367Z", Color(0xffff0201)),
      DartboardPart(DartboardScoreType.double, 16, "M1262.51,5681.92c-231.871,-231.88 -425.805,-498.804 -574.684,-790.988l309.375,-157.629c132.329,259.721 304.729,496.992 510.829,703.104l-245.52,245.513Z", Color(0xff008000)),
      DartboardPart(DartboardScoreType.double, 8, "M687.829,4890.96c-148.875,-292.179 -250.833,-605.979 -302.133,-929.858l342.95,-54.317c45.6,287.904 136.233,566.829 268.558,826.546l-309.375,157.629Z", Color(0xffff0201)),
      DartboardPart(DartboardScoreType.double, 11, "M385.696,3961.08c-51.296,-323.879 -51.296,-653.829 0.004,-977.716l342.946,54.312c-45.596,287.9 -45.6,581.183 -0,869.088l-342.95,54.316Z", Color(0xff008000)),
      DartboardPart(DartboardScoreType.double, 14, "M385.7,2983.36c51.3,-323.888 153.263,-637.676 302.129,-929.855l309.371,157.625c-132.321,259.713 -222.962,538.646 -268.554,826.542l-342.946,-54.312Z", Color(0xffff0201)),
      DartboardPart(DartboardScoreType.double, 9, "M687.829,2053.51c148.871,-292.183 342.817,-559.125 574.692,-790.996l245.512,245.521c-206.112,206.117 -378.496,443.384 -510.833,703.1l-309.371,-157.625Z", Color(0xff008000)),
      DartboardPart(DartboardScoreType.double, 12, "M1262.52,1262.51c231.879,-231.871 498.8,-425.805 790.983,-574.684l157.629,309.375c-259.716,132.329 -496.987,304.729 -703.1,510.829l-245.512,-245.52Z", Color(0xffff0201)),
      DartboardPart(DartboardScoreType.double, 5, "M2053.5,687.829c292.184,-148.875 605.984,-250.833 929.863,-302.133l54.316,342.95c-287.904,45.6 -566.829,136.233 -826.55,268.558l-157.629,-309.375Z", Color(0xff008000)),
      DartboardPart(DartboardScoreType.triple, 20, "M3173.47,1586.01c197.933,-31.351 399.567,-31.346 597.496,0.004l-54.313,342.941c-161.941,-25.641 -326.925,-25.645 -488.862,0l-54.321,-342.946Z", Color(0xffff0201)),
      DartboardPart(DartboardScoreType.triple, 1, "M3770.97,1586.02c197.933,31.35 389.692,93.646 568.242,184.629l-157.625,309.371c-146.1,-74.434 -303.005,-125.413 -464.93,-151.059l54.313,-342.941Z", Color(0xff008000)),
      DartboardPart(DartboardScoreType.triple, 18, "M4339.21,1770.65c178.567,90.983 341.684,209.496 483.392,351.204l-245.521,245.512c-115.95,-115.929 -249.412,-212.891 -395.496,-287.345l157.625,-309.371Z", Color(0xffff0201)),
      DartboardPart(DartboardScoreType.triple, 4, "M4822.58,2121.85c141.704,141.696 260.209,304.821 351.188,483.375l-309.375,157.629c-74.425,-146.075 -171.396,-279.546 -287.333,-395.491l245.52,-245.513Z", Color(0xff008000)),
      DartboardPart(DartboardScoreType.triple, 13, "M5173.79,2605.22c90.979,178.558 153.291,370.321 184.641,568.25l-342.95,54.321c-25.645,-161.942 -76.637,-318.85 -151.066,-464.942l309.375,-157.629Z", Color(0xffff0201)),
      DartboardPart(DartboardScoreType.triple, 6, "M5358.42,3173.47c31.345,197.933 31.345,399.567 -0.005,597.496l-342.945,-54.313c25.641,-161.941 25.65,-326.925 -0,-488.862l342.95,-54.321Z", Color(0xff008000)),
      DartboardPart(DartboardScoreType.triple, 10, "M5358.42,3770.97c-31.35,197.933 -93.646,389.692 -184.634,568.242l-309.366,-157.625c74.433,-146.1 125.408,-303.005 151.054,-464.93l342.946,54.313Z", Color(0xffff0201)),
      DartboardPart(DartboardScoreType.triple, 15, "M5173.79,4339.21c-90.98,178.567 -209.492,341.684 -351.204,483.392l-245.509,-245.521c115.925,-115.95 212.892,-249.412 287.346,-395.496l309.367,157.625Z", Color(0xff008000)),
      DartboardPart(DartboardScoreType.triple, 2, "M4822.58,4822.58c-141.695,141.704 -304.816,260.209 -483.375,351.188l-157.629,-309.375c146.079,-74.425 279.546,-171.396 395.496,-287.333l245.508,245.52Z", Color(0xffff0201)),
      DartboardPart(DartboardScoreType.triple, 17, "M4339.21,5173.79c-178.554,90.979 -370.316,153.291 -568.25,184.641l-54.316,-342.95c161.941,-25.645 318.846,-76.637 464.937,-151.066l157.629,309.375Z", Color(0xff008000)),
      DartboardPart(DartboardScoreType.triple, 3, "M3770.97,5358.42c-197.929,31.345 -399.563,31.345 -597.496,-0.005l54.312,-342.945c161.942,25.641 326.93,25.65 488.867,-0l54.317,342.95Z", Color(0xffff0201)),
      DartboardPart(DartboardScoreType.triple, 19, "M3173.47,5358.42c-197.929,-31.35 -389.688,-93.646 -568.238,-184.634l157.625,-309.366c146.096,74.433 303,125.408 464.925,151.054l-54.312,342.946Z", Color(0xff008000)),
      DartboardPart(DartboardScoreType.triple, 7, "M2605.23,5173.79c-178.566,-90.98 -341.683,-209.492 -483.391,-351.204l245.52,-245.509c115.95,115.925 249.413,212.892 395.496,287.346l-157.625,309.367Z", Color(0xffff0201)),
      DartboardPart(DartboardScoreType.triple, 16, "M2121.84,4822.58c-141.705,-141.695 -260.213,-304.816 -351.192,-483.375l309.379,-157.629c74.425,146.079 171.396,279.546 287.334,395.496l-245.521,245.508Z", Color(0xff008000)),
      DartboardPart(DartboardScoreType.triple, 8, "M1770.65,4339.21c-90.979,-178.554 -153.287,-370.316 -184.637,-568.25l342.945,-54.316c25.65,161.941 76.638,318.846 151.071,464.937l-309.379,157.629Z", Color(0xffff0201)),
      DartboardPart(DartboardScoreType.triple, 11, "M1586.01,3770.97c-31.351,-197.929 -31.346,-399.563 0.004,-597.496l342.941,54.312c-25.641,161.942 -25.645,326.93 0,488.867l-342.946,54.317Z", Color(0xff008000)),
      DartboardPart(DartboardScoreType.triple, 14, "M1586.02,3173.47c31.35,-197.929 93.646,-389.688 184.629,-568.238l309.371,157.625c-74.434,146.096 -125.413,303 -151.059,464.925l-342.941,-54.312Z", Color(0xffff0201)),
      DartboardPart(DartboardScoreType.triple, 9, "M1770.65,2605.23c90.983,-178.566 209.496,-341.683 351.204,-483.391l245.512,245.52c-115.929,115.95 -212.891,249.413 -287.345,395.496l-309.371,-157.625Z", Color(0xff008000)),
      DartboardPart(DartboardScoreType.triple, 12, "M2121.85,2121.84c141.696,-141.705 304.821,-260.213 483.375,-351.192l157.629,309.379c-146.075,74.425 -279.546,171.396 -395.491,287.334l-245.513,-245.521Z", Color(0xffff0201)),
      DartboardPart(DartboardScoreType.triple, 5, "M2605.22,1770.65c178.558,-90.979 370.321,-153.287 568.25,-184.637l54.321,342.945c-161.942,25.65 -318.85,76.638 -464.942,151.071l-157.629,-309.379Z", Color(0xff008000)),
      DartboardPart(DartboardScoreType.bull, 25, "M3390.75,2957.8c282.212,-44.696 551.2,150.733 595.896,432.946c44.7,282.212 -150.734,551.2 -432.942,595.896c-282.213,44.7 -551.2,-150.734 -595.9,-432.942c-44.696,-282.213 150.733,-551.2 432.946,-595.9m43.454,274.358c-131.692,20.859 -222.9,146.396 -202.042,278.088c20.859,131.691 146.396,222.896 278.088,202.037c131.691,-20.854 222.896,-146.391 202.037,-278.083c-20.854,-131.692 -146.391,-222.9 -278.083,-202.042Z", Color(0xff008000)),
      DartboardPart(DartboardScoreType.bull, 50, "m3434.2,3232.16c131.692,-20.858 257.229,70.35 278.083,202.042c20.859,131.692 -70.346,257.229 -202.037,278.083c-131.692,20.859 -257.229,-70.345 -278.088,-202.037c-20.858,-131.692 70.35,-257.229 202.042,-278.088z", Color(0xffff0201)),
    ];


    Paint paint = Paint()
      ..style = PaintingStyle.fill
      ..strokeWidth = 8.0;

    // Scale each path to match canvas size
    var xScale = size.width / 6946;
    var yScale = size.height / 6946;
    final Matrix4 matrix4 = Matrix4.identity();

    matrix4.scale(xScale, yScale);

    partsList.forEach((part) {
      Path path = parseSvgPath(part.path);
      paint.color = part.color;

      path.transform(matrix4.storage);

      myCanvas.drawPath(
        path.transform(matrix4.storage),
        paint,
        onTapDown: (details) {
          onClickHandler(part.type, part.score);
        },
      );
    });
  }

  @override
  bool shouldRepaint(CustomPainter oldDelegate) => true;
}
